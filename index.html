<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Seat Reservation Confirmation</title>
<style>
body {
  margin: 0;
  font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  background: linear-gradient(180deg, #f8fafc 0%, #eef3f8 40%, #fdfdfd 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  position: relative;
  overflow: hidden;
}
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: url('joyjoy.jpg') no-repeat center center / cover;
  z-index: -1;
  opacity: 0.8;
  filter: brightness(0.9);
}
.container {
  background: rgba(255, 255, 255, 0.88);
  border-radius: 20px;
  padding: 30px;
  max-width: 72%;
  width: 380px;
  margin: 80px auto;
  text-align: center;
  box-shadow: 0 6px 25px rgba(126, 165, 201, 0.25);
  border: 2px solid rgba(168, 197, 219, 0.4);
}
h1 { color: #557a9b; font-size: 18px; margin: 0 0 12px; font-weight: 700; line-height: 1.5; }
p { margin: 0 0 15px; color: #444; font-size: 14px; }
.btn { display: block; width: 100%; padding: 12px; margin: 6px 0; border: 2px solid transparent; border-radius: 10px; background: linear-gradient(90deg, #A8C5DB, #7EA5C9); color: white; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
.btn:hover { box-shadow: 0 0 12px 3px rgba(255, 255, 255, 0.7); border-color: #f0f4f8; transform: translateY(-2px); }
.family-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px; }
.family-btn { background: linear-gradient(90deg, #A8C5DB, #7EA5C9); color: white; border: 2px solid transparent; border-radius: 8px; padding: 10px 0; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
.family-btn:hover { box-shadow: 0 0 10px 3px rgba(240, 244, 248, 0.9); border-color: #e8edf3; transform: scale(1.05); }
footer { margin-top: 15px; font-size: 12px; color: #7EA5C9; font-weight: 600; }
/* Modal */
#modal { position: fixed; inset: 0; background: rgba(0,0,0,0.45); display: none; align-items: center; justify-content: center; }
.modal-content { background: rgba(255,255,255,0.88); border-radius: 20px; padding: 30px; max-width: 380px; width: 380px; text-align: center; box-shadow: 0 6px 25px rgba(126, 165, 201, 0.25); border: 2px solid rgba(168, 197, 219, 0.4); transition: all 0.3s ease; }
#reservedText p { color: #557a9b; font-size: 18px; margin: 0; }
#seatCount { font-size: 90px; font-weight: bold; color: #7EA5C9; margin: 10px 0; transition: transform 0.3s ease; }
.acceptBtn, .declineBtn { border: 2px solid transparent; padding: 10px 16px; border-radius: 8px; margin: 5px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; }
.acceptBtn { background: linear-gradient(90deg, #A8C5DB, #7EA5C9); color: white; }
.declineBtn { background: #e3e8ee; color: #4c6b89; }
.acceptBtn:hover, .declineBtn:hover { box-shadow: 0 0 8px 2px rgba(255,255,255,0.7); transform: scale(1.05); }
/* Thank-You Popup */
.thankyou-box { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255,255,255,0.97); border: 2px solid #A8C5DB; border-radius: 25px; padding: 25px 40px; width: 90%; max-width: 600px; font-family: 'Poppins', sans-serif; font-size: 20px; text-align: center; color: #476D91; font-weight: 600; box-shadow: 0 6px 20px rgba(0,0,0,0.25); z-index: 9999; opacity: 1; line-height: 1.5; animation: popIn 0.3s ease; transition: opacity 0.5s ease; }
.thankyou-box span { display: block; margin-top: 4px; }
@keyframes popIn { from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; } to { transform: translate(-50%, -50%) scale(1); opacity: 1; } }
</style>
</head>
<body>

<div class="container" id="mainContainer">
  <h1>We are overjoyed to celebrate this day with our loved ones!</h1>
  <p>Please select who you are:</p>
  <button class="btn" id="brideBtn">Family of the Bride</button>
  <button class="btn" id="groomBtn">Family of the Groom</button>
  <button class="btn" id="friendsBtn">Friend of the Groom <br> or the Bride</button>
  <footer>üíé The Wedding of Jesryl & Michelle 2025 üíé</footer>
</div>

<div class="container" id="brideFamilies" style="display:none">
  <h1>Please choose your family name below to view your reserved seats.</h1>
  <div class="family-grid">
    <button class="family-btn" data-family="Eddie's Family">Eddie's Family</button>
    <button class="family-btn" data-family="Evelyn's Family">Evelyn's Family</button>
    <button class="family-btn" data-family="Ali's Family">Ali's Family</button>
    <button class="family-btn" data-family="Gamay's Family">Gamay's Family</button>
    <button class="family-btn" data-family="Elizer's Family">Elizer's Family</button>
    <button class="family-btn" data-family="Neneng's Family">Neneng's Family</button>
    <button class="family-btn" data-family="Val's Family">Val's Family</button>
    <button class="family-btn" data-family="Natividad's Family">Natividad's Family</button>
    <button class="family-btn" data-family="Vito's Family">Vito's Family</button>
    <button class="family-btn" data-family="Benjamin's Family">Benjamin's Family</button>
    <button class="family-btn" data-family="Jun's Family">Jun's Family</button>
  </div>
</div>

<div id="modal">
  <div class="modal-content">
    <div id="reservedText">
      <p>We reserved</p>
      <h1 id="seatCount">0</h1>
      <p>seats for you!</p>
    </div>

    <div id="rsvpButtons" style="margin-top: 15px; display: none;">
      <div id="nameInputContainer" style="display:none; margin-bottom:10px;">
        <p style="font-size:14px;color:#555;margin-bottom:5px;">Please enter your name:</p>
        <input type="text" id="guestNameInput" placeholder="e.g. Charlotte Pineda"
          style="padding:8px;width:90%;border:1px solid #A8C5DB;border-radius:8px;font-size:14px;text-align:center;">
      </div>
    </div>
  </div>
</div>

<script>
const brideBtn = document.getElementById('brideBtn');
const groomBtn = document.getElementById('groomBtn');
const friendsBtn = document.getElementById('friendsBtn');
const brideFamilies = document.getElementById('brideFamilies');
const mainContainer = document.getElementById('mainContainer');
const modal = document.getElementById('modal');
const seatCount = document.getElementById('seatCount');
const rsvpButtons = document.getElementById('rsvpButtons');
const RSVP_URL = "https://script.google.com/macros/s/AKfycbyJ7VltJdnx1hA5D7pttpEH7uVr06YvxDnrFM--bP4ZSvaMIpqQMCBfG0BwA_RMLlJThw/exec";
let currentFamily = '';

brideBtn.onclick = () => {
  mainContainer.style.display = 'none';
  brideFamilies.style.display = 'block';
};
groomBtn.onclick = () => { alert("Currently on process"); };
friendsBtn.onclick = () => {
  modal.style.display = 'flex';
  seatCount.textContent = 1;
  rsvpButtons.style.display = 'block';
  document.getElementById('nameInputContainer').style.display = 'block';
  currentFamily = '';
  document.querySelector('#reservedText p:nth-of-type(2)').textContent = "seat for you!";
};

const seats = {
  "Eddie's Family": 9,
  "Ali's Family": 8,
  "Elizer's Family": 6,
  "Val's Family": 4,
  "Vito's Family": 7,
  "Jun's Family": 6,
  "Evelyn's Family": 4,
  "Gamay's Family": 17,
  "Neneng's Family": 11,
  "Natividad's Family": 14,
  "Benjamin's Family": 14
};

// Bride Families RSVP Modal
document.querySelectorAll('.family-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    currentFamily = btn.getAttribute('data-family');
    const reservedSeats = seats[currentFamily] || 0;

    // Show modal
    modal.style.display = 'flex';
    rsvpButtons.style.display = 'block';
    
    document.getElementById('reservedText').innerHTML = `
      <p style="color:#557a9b;font-size:16px;margin-bottom:5px;">Reserved Available Seats:</p>
      <h1 id="seatCount">${reservedSeats}</h1>
      <p style="color:#444;font-size:14px;margin:5px 0 10px;">Final Number of Attendees:</p>
      <input type="number" id="attendeesInput" placeholder="Enter number"
        style="padding:8px;width:90%;border:1px solid #A8C5DB;border-radius:8px;font-size:16px;text-align:center;">
      <button class="acceptBtn" id="submitAttendeesBtn" style="margin-top:10px;width:50%;font-size:14px;">Submit</button>
    `;
    
    const attendeesInput = document.getElementById('attendeesInput');
    attendeesInput.setAttribute('max', reservedSeats);

    document.getElementById('submitAttendeesBtn').onclick = () => {
      const finalNumber = parseInt(attendeesInput.value);
      if (!finalNumber || finalNumber < 1 || finalNumber > reservedSeats) {
        alert(`Please enter a number between 1 and ${reservedSeats}`);
        return;
      }

      // Show Thank You message immediately
      showThankYouMessage();

      // Hide modal and reset view
      modal.style.display = 'none';
      brideFamilies.style.display = 'none';
      mainContainer.style.display = 'block';
      currentFamily = '';

      // Send RSVP in background
      fetch(RSVP_URL, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          family: currentFamily,
          response: finalNumber
        })
      }).catch(() => console.log("‚ùå Error submitting RSVP"));
    };
  });
});

// Floating Thank-You Message
function showThankYouMessage() {
  const messageBox = document.createElement('div');
  messageBox.className = 'thankyou-box';
  messageBox.innerHTML = 'üíé RSVP submitted! <br><span>Thank you so much for your response.</span><span>See you on our Wedding Day!</span>';
  document.body.appendChild(messageBox);
  setTimeout(() => {
    messageBox.style.opacity = '0';
    setTimeout(() => messageBox.remove(), 600);
  }, 3700);
}
</script>

</body>
</html>
